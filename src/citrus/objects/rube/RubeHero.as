/**
 * @author Tungstene
 * @version 1.0.0 - 05/06/2013 18:40
 */

package citrus.objects.rube 
{
	import citrus.objects.platformer.box2d.Hero;
	
	public class RubeHero extends Hero implements IRubeObject 
	{
		protected var oBody:Object;
		//-----------------------------------------------------------------------------------------
		protected var engine:RubeEngine = RubeEngine.getInstance();
		//-----------------------------------------------------------------------------------------
		//------------------------------------------------------------------Fonction - constructeur
		//-----------------------------------------------------------------------------------------
		public function RubeHero( name:String, params:Object = null, oBody:Object = null ):void 
		{
			//-------------------------------------------------------
			super( name, params );
			//-------------------------------------------------------
			if ( params && params.x ) this.x = params.x * _box2D.scale;
			if ( params && params.y ) this.y = -params.y * _box2D.scale;
			//-------------------------------------------------------
			this.oBody = oBody;
		}
		//-----------------------------------------------------------------------------------------
		//------------------------------------------------------------------ Destruction de l'objet
		//-----------------------------------------------------------------------------------------
		override public function destroy():void 
		{
			super.destroy();
		}
		//-----------------------------------------------------------------------------------------
		//------------------------------------------------------------- Update toutes les timeDelta
		//-----------------------------------------------------------------------------------------
		override public function update( timeDelta:Number ):void
		{
			super.update(timeDelta);
		}
		//-----------------------------------------------------------------------------------------
		//---------------------------------------------------------- Attribut les variables du BODY
		//-----------------------------------------------------------------------------------------
		override protected function defineBody():void
		{
			//-------------------------------------------------------
			super.defineBody();
			//-------------------------------------------------------
			engine.defineBody( _bodyDef, oBody );
		}
		//-----------------------------------------------------------------------------------------
		//------------------------------------------------------------------------ Cr√©ation du BODY
		//-----------------------------------------------------------------------------------------
		override protected function createBody():void
		{
			//-------------------------------------------------------
			super.createBody();
			//-------------------------------------------------------
			engine.createBody( _body, oBody );	
		}
		//-----------------------------------------------------------------------------------------
		//----------------------------------------------------- Attribut les variables des FIXTURES
		//-----------------------------------------------------------------------------------------
		override protected function defineFixture():void 
		{
			//-------------------------------------------------------
			super.defineFixture();
			//-------------------------------------------------------
			engine.defineFixture( _fixtureDef, _body, oBody );
		}
		//-----------------------------------------------------------------------------------------
		//------------------------------------------------------ Renvoit une description de l'objet
		//-----------------------------------------------------------------------------------------
		public function toString( ):String
		{
			return "[ RubeHero " +
					" name:"   + this.name +
					" x:"      + this.x +
					" y:"      + this.y +
					" active:" + (_body ? _body.IsActive() : "false") +
					" ]";
		}
	}
}